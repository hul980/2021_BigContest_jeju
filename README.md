# 2021_BigContest_jeju

![image](https://user-images.githubusercontent.com/79079823/141927772-509f9ddc-4746-422b-a74f-858d1816d90a.png)

왼쪽부터 프로젝트 ppt 메인, 2차심사 발표 현장

## 💡Summary

- 분석 배경: 제주의 음식물 쓰레기는 심각한 환경문제 → 증가하는 음식물 쓰레기 양에 대비하는 관리 체계의 필요성 → 제주도 내 행정동별로 **2021년 7월, 8월의 음식물 쓰레기 양을 예측**하는 모델을 만들어, 음식물 쓰레기의 관리를 용이하도록 하고자 함
- 전처리: 음식물 쓰레기 양의 증감 추이에 따라 제주 지역 `군집화` → `회귀 분석, 시계열 분해` 등의 방법으로 `이상치 제거`
- 의의
    - 데이터 분석 결과인 음식물 쓰레기 예측량과 함께 `넛지를 활용한 자발적인 행동 변화`를 요구함
    - 음식물 쓰레기 양의 최적의 예측 모델을 구현하기 위해 다양한 전처리, 모델링 방법 탐색함
- 키워드: `#autoML` `#넛지`

## 📝프로젝트 진행 과정

- 프로젝트 내용 전체 ppt [링크](https://drive.google.com/file/d/1bvZY_xly26SFyYbV8M5UO4_AFnHPyQ7j/view?usp=sharing)

### (1) 프로젝트 진행 순서

![image](https://user-images.githubusercontent.com/79079823/136738394-986c3e07-0a96-4e1e-a33e-d90b4050dd6b.png)

### (2) EDA

**-1) 파생변수 생성**

![image](https://user-images.githubusercontent.com/79079823/136741225-b9a19ef4-ac24-436b-a0bb-5d14fab4c7c9.png)

- EDA를 통해 `성비`가 음식 관련 카드 소비량과 관련 있음을 확인 → 성비 관련 파생변수 생성
- **Prophet 모델**로 **시계열 분해**를 통해 음식물 쓰레기 양의 장기적인 패턴인 `trend` 변수 생성
- `요일`별로 음식물 쓰레기 배출량이 다름을 확인 → 요일 관련 파생변수 생성


**-2) 외부 데이터 수집**

![image](https://user-images.githubusercontent.com/79079823/136741272-e20f568b-f5fd-4590-b7b6-b4b632fbc616.png)

- 사람의 행동이 음식물 쓰레기 양에 유의미한 영향을 미칠 것으로 판단 → 사람 행동에 영향을 주는 **날씨 데이터, 코로나19 데이터**와 인구 관련 데이터인 **입도객 수, 인구 밀도 등** 수집



### (3) 음식물 쓰레기 추이에 따른 행정동 클러스터링

![image](https://user-images.githubusercontent.com/79079823/136738457-03a4c617-287f-4af7-af49-709e31c1645e.png)

- 행정동 별 음식물 쓰레기 양의 추이가 서로 상이함 → 시계열의 유사도를 측정하는 알고리즘인 `DTW`(Dynamic Time Warping)을 기준으로 제주 지역을 군집화
- `time series k means`로 총 41개 동을 3개의 군집(18개동, 15개동, 9개동)으로 나누어 `군집 별 특성이 유사한 행정동끼리 모델 학습`을 하고자 함

### (4) 이상치 탐지 및 제거

- 음식물 쓰레기 예측 정확도를 높이기 위해 `이상치 탐지`를 다양한 방법으로 진행

**-1) 회귀분석을 통한 이상치 탐지** 👎

![image](https://user-images.githubusercontent.com/79079823/136738190-8aa632b6-3e32-44a4-a3e6-c3ae5541eec8.png)

- `회귀 모델`로 음식물 쓰레기 양을 예측하여 예측값의 상한선, 하한선을 초과하는 경우 이상치로 탐지하고자 하였으나, 회귀 모델의 정확도가 매우 낮다는 문제

**-2) 시계열 분해를 통한 이상치 탐지** 👍

![image](https://user-images.githubusercontent.com/79079823/141927282-9e8c1f86-df0e-44e0-9ae4-de4f0db76e85.png)


- 음식물 쓰레기 양을 `STL(시계열 분해)`를 통해 **계절성, 장기적 변동 패턴, 잔차**로 분해
- 잔차의 이상치를 `IQR`을 통해 탐지 및 보간 → 정교한 이상치 탐지 및 제거 가능, 최종으로 선택

**-3) IQR을 통한 이상치 탐지** 👎

![image](https://user-images.githubusercontent.com/79079823/136738334-8de1b1e5-7447-41b0-b902-52ea847727a0.png)
- 음식물 쓰레기 양의 이상치를 `IQR`을 통해 탐지 및 보간 → 간단하나, 정교하지 못하다는 문제

### (5) 모델링

![image](https://user-images.githubusercontent.com/79079823/136738530-db3df961-4457-4167-959e-84e803e43587.png)


**-1) 시계열 분석 모델링** 👎

- `ARIMA, SARIMA, VAR`의 전통적인 시계열 분석 모델링을 하고자 했으나, `ADF test` 결과 음식물 쓰레기 양이 **정상성을 만족하지 않는다**는 문제, 시계열 분석 모델링 불가

**-2) LSTM 모델링** 👍

![image](https://user-images.githubusercontent.com/79079823/136738625-acda102f-dac6-4f1c-94cc-6931422f1767.png)

- 장기 기억과 단기 기억을 모두 가진 모델로, 변수가 많은 우리 데이터가 **경사 소실, 연산 지연 문제에 빠지지 않도록** 함 → 학습에 용이
- 학습 변수는 18년 1월부터 21년 6월까지의 데이터가 있고, 21년 7,8월의 음식물 쓰레기 양을 예측해야 함 → 21년 7,8월의 **학습 변수가 부재**하다는 문제 → **2달 전의 데이터로 예측**을 진행하도록 데이터프레임 구성하여 해결
- `슬라이딩 윈도우` 기법으로 8개월 전 데이터까지 학습하도록 함 → 모델이 **시계열성**을 가지도록 함
- 군집 별로 모델링하여 학습, `MAPE, RMSE, MASE, R2`로 validation 성능 평가 → 모든 군집 RMSE 기준 0.1 미만으로 높은 성능을 보임

**-3) autoML 모델링 👍**

![image](https://user-images.githubusercontent.com/79079823/136738649-da492e51-417b-4ecb-a8f3-99ba33467d90.png)

- autoML은 최적의 알고리즘을 탐색하여 **최적의 모델을 생성**해주는 툴로, 다양한 autoML을 탐색함
- 비-시계열 모델인 AutoH2O, AutoGluon 중 성능이 높은 `AutoGluon`과 시계열 모델인 `Azure AutoML`을 사용함

**-4) 최종 모델 선택**

![image](https://user-images.githubusercontent.com/79079823/136738686-d6bf1327-bb0c-483c-a230-e8ffe90b3166.png)

- `LSTM`, 비-시계열 AutoML인 `AutoGluon`, 시계열 AutoML인 `Azure`을 최종 모델로 선택, 행정동 별 7,8월 예측값의 `중앙값`으로 최종 예측

### (6) 넛지를 통한 음식물 쓰레기 배출 감소 방안

![image](https://user-images.githubusercontent.com/79079823/136738717-db753f8f-0489-4b41-b02b-ad550b954a0f.png)


- `넛지`: **간접적인 방식**으로 **자발적인 행동을 유도**하는 방법. 기존의 **클린하우스**(제주 폐기물 처리시설) 어플을 이용해 제주도민들의 음식물 쓰레기 배출 시 넛지 효과 도입하고자 함
- 1) `기준선 설정 넛지`: 사람들은 기준선에 따라 선택을 조정하는 경향이 있다.
    
    → **전국 대비 제주도민 음식물 쓰레기 배출량을 기준선**으로 노출하여 배출량이 높음을 인식하도록 한다.
    
- 2) `입수 가능 발견법 넛지`: 매체에 많이 노출되는 위험성을 큰 위험으로 인지한다.
    
    → 과태료 부과 사례, 연간 음식물 쓰레기 처리 비용 등을 지속적으로 노출하여 음식물 쓰레기 관련 **위험성을 각인**시킨다.
    
- 3) `환경 넛지`: 현재의 상황을 직관적으로 보여줄 수록 행동 변화를 유도하기에 용이하다.
    
    → 행정동별 인구대비 음식물 쓰레기 배출량, 음식물 쓰레기 배출량 추세 등을 **이모티콘**으로 보여준다.
    
- 4) `현상 유지 편향`: 지금까지의 행동을 유지하려는 경향
    
    → 주민들의 클린하우스의 **분산 이용**을 유도하기 위해 **실시간** 클린하우스 여유 공간, **내달 예측량**을 보여준다. 
    

## 🛠️사용 기술 및 라이브러리

- autoML, LSTM의 머신러닝, 딥러닝 모델링
- selenium, BeautifulSoup으로 외부 데이터 크롤링
- Prophet, statsmodels, tslearn 등의 시계열 분석 라이브러리
